{"version":3,"sources":["/Users/lixianjie/project/openSource/hooks/src/effect/useUpdate/useUpdate.ts"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { useFn } from \"@m78/hooks\";\n\n/**\n * 用于手动触发组件更新, 如果设置了nextTickCall, 多次触发的update会在下一个事件周期统一触发\n * */\nexport const useUpdate = (nextTickCall = false) => {\n  const [, setCount] = useState(0);\n  const timerRef = useRef<any>();\n\n  const nextTickUpdate = useFn(() => {\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(() => {\n      setCount((prev) => prev + 1);\n    });\n  });\n\n  const update = useFn(() => setCount((prev) => prev + 1));\n\n  return nextTickCall ? nextTickUpdate : update;\n};\n"],"names":["useRef","useState","useFn","useUpdate","nextTickCall","setCount","timerRef","nextTickUpdate","clearTimeout","current","setTimeout","prev","update"],"mappings":"AAAA;AAAA,SAASA,MAAM,EAAEC,QAAQ,QAAQ,OAAO,CAAC;AACzC,SAASC,KAAK,QAAQ,YAAY,CAAC;AAEnC;;GAEG,GACH,OAAO,IAAMC,SAAS,GAAG,WAA0B;QAAzBC,YAAY,oEAAG,KAAK;IAC5C,IAAqBH,GAAW,oBAAXA,QAAQ,CAAC,CAAC,CAAC,IAAA,EAAvBI,QAAQ,GAAIJ,GAAW,GAAf,AAAgB;IACjC,IAAMK,QAAQ,GAAGN,MAAM,EAAO,AAAC;IAE/B,IAAMO,cAAc,GAAGL,KAAK,CAAC,WAAM;QACjCM,YAAY,CAACF,QAAQ,CAACG,OAAO,CAAC,CAAC;QAC/BH,QAAQ,CAACG,OAAO,GAAGC,UAAU,CAAC,WAAM;YAClCL,QAAQ,CAAC,SAACM,IAAI;uBAAKA,IAAI,GAAG,CAAC;aAAA,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,AAAC;IAEH,IAAMC,MAAM,GAAGV,KAAK,CAAC;eAAMG,QAAQ,CAAC,SAACM,IAAI;mBAAKA,IAAI,GAAG,CAAC;SAAA,CAAC;KAAA,CAAC,AAAC;IAEzD,OAAOP,YAAY,GAAGG,cAAc,GAAGK,MAAM,CAAC;AAChD,CAAC,CAAC"}