{"version":3,"sources":["/Users/lixianjie/project/openSource/hooks/src/effect/useUpdate/useUpdate.ts"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { useFn } from \"@m78/hooks\";\n\n/**\n * 用于手动触发组件更新, 如果设置了nextTickCall, 多次触发的update会在下一个事件周期统一触发\n * */\nexport const useUpdate = (nextTickCall = false) => {\n  const [, setCount] = useState(0);\n  const timerRef = useRef<any>();\n\n  const nextTickUpdate = useFn(() => {\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(() => {\n      setCount((prev) => prev + 1);\n    });\n  });\n\n  const update = useFn(() => setCount((prev) => prev + 1));\n\n  return nextTickCall ? nextTickUpdate : update;\n};\n"],"names":["useUpdate","nextTickCall","useState","setCount","timerRef","useRef","nextTickUpdate","useFn","clearTimeout","current","setTimeout","prev","update"],"mappings":"AAAA;qJAAiC,OAAO,WAClB,YAAY;;;;QADD,OAAO;QAClB,YAAY;;;;;;;;mCAKrBA,WAAS;;;mBAATA,SAAS;;;;IAAf,IAAMA,SAAS,GAAG,WAA0B;YAAzBC,YAAY,oEAAG,KAAK;QAC5C,IAAqBC,GAAW,kBAAXA,IAAAA,MAAQ,SAAA,EAAC,CAAC,CAAC,IAAA,EAAvBC,QAAQ,GAAID,GAAW,GAAf,AAAgB;QACjC,IAAME,QAAQ,GAAGC,IAAAA,MAAM,OAAA,GAAO,AAAC;QAE/B,IAAMC,cAAc,GAAGC,IAAAA,MAAK,MAAA,EAAC,WAAM;YACjCC,YAAY,CAACJ,QAAQ,CAACK,OAAO,CAAC,CAAC;YAC/BL,QAAQ,CAACK,OAAO,GAAGC,UAAU,CAAC,WAAM;gBAClCP,QAAQ,CAAC,SAACQ,IAAI;2BAAKA,IAAI,GAAG,CAAC;iBAAA,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,AAAC;QAEH,IAAMC,MAAM,GAAGL,IAAAA,MAAK,MAAA,EAAC;mBAAMJ,QAAQ,CAAC,SAACQ,IAAI;uBAAKA,IAAI,GAAG,CAAC;aAAA,CAAC;SAAA,CAAC,AAAC;QAEzD,OAAOV,YAAY,GAAGK,cAAc,GAAGM,MAAM,CAAC;IAChD,CAAC,AAAC"}