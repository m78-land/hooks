{"version":3,"sources":["/Users/lixianjie/project/openSource/hooks/src/effect/useEffectEqual/useEffectEqual.ts"],"sourcesContent":["import React, { useEffect, useMemo, useRef } from \"react\";\nimport { usePrev } from \"@m78/hooks\";\nimport _isEqualWith from \"lodash/isEqualWith\";\nimport { IsEqualCustomizer } from \"lodash\";\n\n/**\n *  æ”¯æŒå¯¹depsè¿›è¡Œæ·±åº¦å¯¹æ¯”çš„`useEffect`\n *  ðŸ’¡ä¿æŒdepså€¼ç»“æž„ç›¸å¯¹ç®€å•èƒ½å¤Ÿå‡å°‘å¯¹æ¯”æ·±åº¦ï¼Œä»Žè€Œæé«˜æ€§èƒ½\n *  @param effect - åŒuseEffectå‚æ•°1\n *  @param deps - ä¾èµ–æ•°ç»„ï¼Œç”¨æ³•ä¸ŽuseEffectä¸€è‡´ï¼Œä½†æ˜¯ä¼šå¯¹depé¡¹æ‰§è¡Œæ·±å¯¹æ¯”\n *  @param customizer - å¯ä»¥é€šè¿‡æ­¤å‡½æ•°è‡ªå®šä¹‰å¯¹æ¯”æ–¹å¼, å¦‚æžœç›¸ç­‰è¿”å›ž trueï¼Œå¦åˆ™è¿”å›ž false, è¿”å›žundefinedæ—¶ä½¿ç”¨é»˜è®¤å¯¹æ¯”æ–¹å¼\n * */\nexport function useEffectEqual(\n  effect: React.EffectCallback,\n  deps?: any[],\n  customizer?: IsEqualCustomizer\n) {\n  const prev = usePrev(deps);\n  const dep = useRef(0);\n\n  const isEqual = useMemo(() => _isEqualWith(deps, prev, customizer), [deps]);\n\n  if (!isEqual) {\n    dep.current++;\n  }\n\n  useEffect(effect, [dep.current]);\n}\n"],"names":["useEffectEqual","effect","deps","customizer","prev","usePrev","dep","useRef","isEqual","useMemo","_isEqualWith","current","useEffect"],"mappings":"AAAA;wNAAkD,OAAO,WACjC,YAAY,WACX,oBAAoB;;;;;QAFK,OAAO;QACjC,YAAY;QACX,oBAAoB;;;;;;;;mCAU7BA,gBAAc;;;mBAAdA,cAAc;;;;;;;IAAvB,SAASA,cAAc,CAC5BC,MAA4B,EAC5BC,IAAY,EACZC,UAA8B,EAC9B;QACA,IAAMC,IAAI,GAAGC,IAAAA,MAAO,QAAA,EAACH,IAAI,CAAC,AAAC;QAC3B,IAAMI,GAAG,GAAGC,IAAAA,MAAM,OAAA,EAAC,CAAC,CAAC,AAAC;QAEtB,IAAMC,OAAO,GAAGC,IAAAA,MAAO,QAAA,EAAC;mBAAMC,IAAAA,YAAY,QAAA,EAACR,IAAI,EAAEE,IAAI,EAAED,UAAU,CAAC;SAAA,EAAE;YAACD,IAAI;SAAC,CAAC,AAAC;QAE5E,IAAI,CAACM,OAAO,EAAE;YACZF,GAAG,CAACK,OAAO,EAAE,CAAC;QAChB,CAAC;QAEDC,IAAAA,MAAS,UAAA,EAACX,MAAM,EAAE;YAACK,GAAG,CAACK,OAAO;SAAC,CAAC,CAAC;IACnC,CAAC"}