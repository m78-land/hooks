{"version":3,"sources":["/Users/lixianjie/project/openSource/hooks/src/utils/utils.ts"],"sourcesContent":["import { isArray, isDom } from \"@m78/utils\";\nimport { RefObject } from \"react\";\n\n/** 用于获取dom的target */\nexport type DomTarget = HTMLElement | RefObject<HTMLElement>;\n\n/**\n * 依次从target、target.current、ref.current取值，只要有任意一个为dom元素则返回\n * 传入dom时原样返回，传入包含dom对象的ref时返回current，否则返回undefined\n * */\nexport function getRefDomOrDom<H = HTMLElement>(\n  target?: any,\n  ref?: RefObject<any>\n): H | undefined {\n  if (isDom(target)) return target as unknown as H;\n  if (target && isDom(target.current)) return target.current as H;\n  if (ref && isDom(ref.current)) return ref.current as unknown as H;\n  return undefined;\n}\n\n/** 增强的getRefDomOrDom, 可以从一组target或单个target中获取dom */\nexport function getTargetDomList<H = HTMLElement>(\n  target?: DomTarget | DomTarget[],\n  ref?: RefObject<any>\n): H[] | undefined {\n  if (target) {\n    const targetList: DomTarget[] = isArray(target) ? target : [target];\n\n    const ls = targetList\n      .map((item) => getRefDomOrDom<H>(item))\n      .filter((item) => !!item) as H[];\n\n    if (ls.length) return ls;\n  }\n\n  const dom = getRefDomOrDom<H>(ref);\n\n  if (dom) return [dom];\n}\n"],"names":["getRefDomOrDom","getTargetDomList","target","ref","isDom","current","undefined","targetList","isArray","ls","map","item","filter","length","dom"],"mappings":"AAAA;mGAA+B,YAAY;;;QAAZ,YAAY;;;;;;;;;;;;;;;QAU3BA,cAAc;mBAAdA,cAAc;;QAWdC,gBAAgB;mBAAhBA,gBAAgB;;;IAXzB,SAASD,cAAc,CAC5BE,MAAY,EACZC,GAAoB,EACL;QACf,IAAIC,IAAAA,MAAK,MAAA,EAACF,MAAM,CAAC,EAAE,OAAOA,MAAM,CAAiB;QACjD,IAAIA,MAAM,IAAIE,IAAAA,MAAK,MAAA,EAACF,MAAM,CAACG,OAAO,CAAC,EAAE,OAAOH,MAAM,CAACG,OAAO,CAAM;QAChE,IAAIF,GAAG,IAAIC,IAAAA,MAAK,MAAA,EAACD,GAAG,CAACE,OAAO,CAAC,EAAE,OAAOF,GAAG,CAACE,OAAO,CAAiB;QAClE,OAAOC,SAAS,CAAC;IACnB,CAAC;IAGM,SAASL,gBAAgB,CAC9BC,MAAgC,EAChCC,GAAoB,EACH;QACjB,IAAID,MAAM,EAAE;YACV,IAAMK,UAAU,GAAgBC,IAAAA,MAAO,QAAA,EAACN,MAAM,CAAC,GAAGA,MAAM,GAAG;gBAACA,MAAM;aAAC,AAAC;YAEpE,IAAMO,EAAE,GAAGF,UAAU,CAClBG,GAAG,CAAC,SAACC,IAAI;uBAAKX,cAAc,CAAIW,IAAI,CAAC;aAAA,CAAC,CACtCC,MAAM,CAAC,SAACD,IAAI;uBAAK,CAAC,CAACA,IAAI;aAAA,CAAC,AAAO,AAAC;YAEnC,IAAIF,EAAE,CAACI,MAAM,EAAE,OAAOJ,EAAE,CAAC;QAC3B,CAAC;QAED,IAAMK,GAAG,GAAGd,cAAc,CAAIG,GAAG,CAAC,AAAC;QAEnC,IAAIW,GAAG,EAAE,OAAO;YAACA,GAAG;SAAC,CAAC;IACxB,CAAC"}